<head>
  <title>Sport Grid</title>
</head>

<body>
  <div class="container">
    {{> team_grid }}
  </div>
</body>

<template name="team_grid">
  {{#if team}}{{#with team}}
    <h1>{{ name }} Schedule</h1>
    
    {{#if games}}
      <table id="schedule" class="table table-striped">
        <thead>
          <tr>
            <th></th>
            {{#each games}}
              {{> game_header }}
            {{/each}}
            <th><button class="btn add_game">
              <i class="icon-plus"></i> Add Game</a>
            </th>
          <tr/>
        </thead>
        
        <tbody>
          {{#each players}}
            {{> player_row }}
          {{/each}}
          <th><button class="btn add_player">
            <i class="icon-plus"></i> Add Player</a>
          </th>
          {{#each games}}
            <td></td>
          {{/each}}
          <td></td>{{! extra for add game}}
        </tbody>
      </table>
    {{else}}
      <p>No Games!</p>
    {{/if}}
  
  {{/with }}{{/if}}
</template>

<template name="game_header">
  <th>
    {{#if editing}}
      <p>
        <input name="date" type="text" value="{{format_date date}}"></input>
      </p>
      <p>
        <input name="time" type="text" value="{{time}}"></input>
        -- 
        <input name="location" type="text" value="{{location}}"></input>
      </p>
    {{else}}
      <p>{{format_date date}}</p>
      <p>{{time}} -- {{location}}</p>
    {{/if}}
    <p>{{player_count}}</p>
  </th>
</template>

<template name="player_row">
  <tr>
    <th>
      {{#if editing}}
        <p>
          <input name="name" type="text" value="{{name}}"></input>
        </p>
        <p>
          <input name="email" type="text" value="{{email}}"></input>
        </p>
      {{else}}
        {{#if empty}}
          <p class="empty_player">
            Enter some details
          </p>
        {{else}}
          <p>{{name}}</p>
          <p>{{email}}</p>
        {{/if}}
      {{/if}}
    </th>
    
    {{#each availabilities}}
      {{> availability_cell}}
    {{/each}}
    <td></td>{{! extra for add game}}
  </tr>
</template>

<template name="availability_cell">
  <td class="{{availability_class availability}}">
    {{availability_state availability}}
  </td>
</template>